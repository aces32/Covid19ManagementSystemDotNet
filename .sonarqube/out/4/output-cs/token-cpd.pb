Ω

óC:\Users\Ayo\Documents\ThynkSoft\COVID-19PCR.TestManagement\COVID-19PCR.TestManagement.Persistence\Configuration\AdminBookingAllocationConfiguration.cs
	namespace

 	
COVID_19PCR


 
.

 
TestManagement

 $
.

$ %
Persistence

% 0
.

0 1
Configuration

1 >
{ 
public 

class /
#AdminBookingAllocationConfiguration 4
:5 6$
IEntityTypeConfiguration7 O
<O P"
AdminBookingAllocationP f
>f g
{ 
public 
void 
	Configure 
( 
EntityTypeBuilder /
</ 0"
AdminBookingAllocation0 F
>F G
builderH O
)O P
{ 	
builder 
. 
Property 
( 
e 
=> !
e" #
.# $
BookingDates$ 0
)0 1
. 

IsRequired 
( 
) 
; 
builder 
. 
Property 
( 
e 
=> !
e" #
.# $
Capacity$ ,
), -
. 

IsRequired 
( 
) 
; 
} 	
} 
} ™
ãC:\Users\Ayo\Documents\ThynkSoft\COVID-19PCR.TestManagement\COVID-19PCR.TestManagement.Persistence\Configuration\IndividualConfiguration.cs
	namespace

 	
COVID_19PCR


 
.

 
TestManagement

 $
.

$ %
Persistence

% 0
.

0 1
Configuration

1 >
{ 
public 

class #
IndividualConfiguration (
:) *$
IEntityTypeConfiguration+ C
<C D

IndividualD N
>N O
{ 
public 
void 
	Configure 
( 
EntityTypeBuilder /
</ 0

Individual0 :
>: ;
builder< C
)C D
{ 	
builder 
. 
Property 
( 
e 
=> !
e" #
.# $
IndividualFirstName$ 7
)7 8
. 

IsRequired 
( 
) 
. 
HasMaxLength 
( 
$num !
)! "
;" #
builder 
. 
Property 
( 
e 
=> !
e" #
.# $
IndividualLastName$ 6
)6 7
. 

IsRequired 
( 
) 
. 
HasMaxLength 
( 
$num !
)! "
;" #
builder 
. 
Property 
( 
e 
=> !
e" #
.# $"
IndividualMobileNumber$ :
): ;
. 

IsRequired 
( 
) 
. 
HasMaxLength 
( 
$num  
)  !
;! "
builder 
. 
Property 
( 
e 
=> !
e" #
.# $"
IndividualEmailAddress$ :
): ;
. 

IsRequired 
( 
) 
. 
HasMaxLength 
( 
$num  
)  !
;! "
builder 
. 
Property 
( 
e 
=> !
e" #
.# $#
IndividualBookingStatus$ ;
); <
. 

IsRequired 
( 
) 
; 
} 	
} 
}   ú
éC:\Users\Ayo\Documents\ThynkSoft\COVID-19PCR.TestManagement\COVID-19PCR.TestManagement.Persistence\Configuration\IndividualLabConfiguration.cs
	namespace

 	
COVID_19PCR


 
.

 
TestManagement

 $
.

$ %
Persistence

% 0
.

0 1
Configuration

1 >
{ 
public 

class &
IndividualLabConfiguration +
:, -$
IEntityTypeConfiguration. F
<F G
IndividualLabG T
>T U
{ 
public 
void 
	Configure 
( 
EntityTypeBuilder /
</ 0
IndividualLab0 =
>= >
builder? F
)F G
{ 	
builder 
. 
Property 
( 
e 
=> !
e" #
.# $
TestCompleted$ 1
)1 2
. 

IsRequired 
( 
) 
; 
builder 
. 
Property 
( 
e 
=> !
e" #
.# $
TestOutCome$ /
)/ 0
. 

IsRequired 
( 
) 
; 
builder 
. 
Property 
( 
e 
=> !
e" #
.# $
TestType$ ,
), -
. 

IsRequired 
( 
) 
; 
} 	
} 
} ∞)
yC:\Users\Ayo\Documents\ThynkSoft\COVID-19PCR.TestManagement\COVID-19PCR.TestManagement.Persistence\COVID19PCRDbContext.cs
	namespace 	
COVID_19PCR
 
. 
TestManagement $
.$ %
Persistence% 0
{ 
public 

class 
COVID19PCRDbContext $
:% &
	DbContext' 0
{ 
public 
COVID19PCRDbContext "
(" #
DbContextOptions# 3
<3 4
COVID19PCRDbContext4 G
>G H
optionsI P
)P Q
: 
base 
( 
options 
) 
{ 	
} 	
public 
DbSet 
< "
AdminBookingAllocation +
>+ ,#
AdminBookingAllocations- D
{E F
getG J
;J K
setL O
;O P
}Q R
public 
DbSet 
< 

Individual 
>  
Individuals! ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
DbSet 
< 
IndividualLab "
>" #
IndividualLabs$ 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public 
DbSet 
< 
Location 
> 
	Locations (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. +
ApplyConfigurationsFromAssembly 8
(8 9
typeof9 ?
(? @
DbContextOptions@ P
)P Q
.Q R
AssemblyR Z
)Z [
;[ \
modelBuilder 
. 
Entity 
<  
Location  (
>( )
() *
)* +
.+ ,
HasData, 3
(3 4
new4 7
Location8 @
{ 

LocationID   
=   
$num   
,   
LocationName!! 
=!! 
$str!! /
}"" 
)"" 
;"" 
modelBuilder$$ 
.$$ 
Entity$$ 
<$$  
Location$$  (
>$$( )
($$) *
)$$* +
.$$+ ,
HasData$$, 3
($$3 4
new$$4 7
Location$$8 @
{%% 

LocationID&& 
=&& 
$num&& 
,&& 
LocationName'' 
='' 
$str'' .
}(( 
)(( 
;(( 
modelBuilder** 
.** 
Entity** 
<**  
Location**  (
>**( )
(**) *
)*** +
.**+ ,
HasData**, 3
(**3 4
new**4 7
Location**8 @
{++ 

LocationID,, 
=,, 
$num,, 
,,, 
LocationName-- 
=-- 
$str-- +
}.. 
).. 
;.. 
modelBuilder00 
.00 
Entity00 
<00  
Location00  (
>00( )
(00) *
)00* +
.00+ ,
HasData00, 3
(003 4
new004 7
Location008 @
{11 

LocationID22 
=22 
$num22 
,22 
LocationName33 
=33 
$str33 3
}44 
)44 
;44 
}55 	
public77 
override77 
Task77 
<77 
int77  
>77  !
SaveChangesAsync77" 2
(772 3
CancellationToken773 D
cancellationToken77E V
=77W X
new77Y \
CancellationToken77] n
(77n o
)77o p
)77p q
{88 	
foreach99 
(99 
var99 
entry99 
in99 !
ChangeTracker99" /
.99/ 0
Entries990 7
<997 8
AuditableEntity998 G
>99G H
(99H I
)99I J
)99J K
{:: 
switch;; 
(;; 
entry;; 
.;; 
State;; #
);;# $
{<< 
case== 
EntityState== $
.==$ %
Added==% *
:==* +
entry>> 
.>> 
Entity>> $
.>>$ %
CreatedDate>>% 0
=>>1 2
DateTime>>3 ;
.>>; <
Now>>< ?
;>>? @
break?? 
;?? 
case@@ 
EntityState@@ $
.@@$ %
Modified@@% -
:@@- .
entryAA 
.AA 
EntityAA $
.AA$ %
LastModifiedDateAA% 5
=AA6 7
DateTimeAA8 @
.AA@ A
NowAAA D
;AAD E
breakBB 
;BB 
}CC 
}DD 
returnEE 
baseEE 
.EE 
SaveChangesAsyncEE (
(EE( )
cancellationTokenEE) :
)EE: ;
;EE; <
}FF 	
}GG 
}HH Äß
çC:\Users\Ayo\Documents\ThynkSoft\COVID-19PCR.TestManagement\COVID-19PCR.TestManagement.Persistence\Migrations\20211012164407_initialCreate.cs
	namespace 	
COVID_19PCR
 
. 
TestManagement $
.$ %
Persistence% 0
.0 1

Migrations1 ;
{ 
public 

partial 
class 
initialCreate &
:' (
	Migration) 2
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{		 	
migrationBuilder

 
.

 
CreateTable

 (
(

( )
name 
: 
$str &
,& '
columns 
: 
table 
=> !
new" %
{ 
IndividualLabId #
=$ %
table& +
.+ ,
Column, 2
<2 3
int3 6
>6 7
(7 8
type8 <
:< =
$str> C
,C D
nullableE M
:M N
falseO T
)T U
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
TestType 
= 
table $
.$ %
Column% +
<+ ,
int, /
>/ 0
(0 1
type1 5
:5 6
$str7 <
,< =
nullable> F
:F G
falseH M
)M N
,N O
TestOutCome 
=  !
table" '
.' (
Column( .
<. /
int/ 2
>2 3
(3 4
type4 8
:8 9
$str: ?
,? @
nullableA I
:I J
falseK P
)P Q
,Q R
TestCompleted !
=" #
table$ )
.) *
Column* 0
<0 1
bool1 5
>5 6
(6 7
type7 ;
:; <
$str= B
,B C
nullableD L
:L M
falseN S
)S T
,T U
	CreatedBy 
= 
table  %
.% &
Column& ,
<, -
string- 3
>3 4
(4 5
type5 9
:9 :
$str; J
,J K
nullableL T
:T U
trueV Z
)Z [
,[ \
CreatedDate 
=  !
table" '
.' (
Column( .
<. /
DateTimeOffset/ =
>= >
(> ?
type? C
:C D
$strE U
,U V
nullableW _
:_ `
falsea f
)f g
,g h
LastModifiedBy "
=# $
table% *
.* +
Column+ 1
<1 2
string2 8
>8 9
(9 :
type: >
:> ?
$str@ O
,O P
nullableQ Y
:Y Z
true[ _
)_ `
,` a
LastModifiedDate $
=% &
table' ,
., -
Column- 3
<3 4
DateTimeOffset4 B
>B C
(C D
typeD H
:H I
$strJ Z
,Z [
nullable\ d
:d e
truef j
)j k
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 8
,8 9
x: ;
=>< >
x? @
.@ A
IndividualLabIdA P
)P Q
;Q R
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str !
,! "
columns 
: 
table 
=> !
new" %
{   

LocationID!! 
=!!  
table!!! &
.!!& '
Column!!' -
<!!- .
int!!. 1
>!!1 2
(!!2 3
type!!3 7
:!!7 8
$str!!9 >
,!!> ?
nullable!!@ H
:!!H I
false!!J O
)!!O P
."" 

Annotation"" #
(""# $
$str""$ 8
,""8 9
$str"": @
)""@ A
,""A B
LocationName##  
=##! "
table### (
.##( )
Column##) /
<##/ 0
string##0 6
>##6 7
(##7 8
type##8 <
:##< =
$str##> M
,##M N
nullable##O W
:##W X
true##Y ]
)##] ^
,##^ _
	CreatedBy$$ 
=$$ 
table$$  %
.$$% &
Column$$& ,
<$$, -
string$$- 3
>$$3 4
($$4 5
type$$5 9
:$$9 :
$str$$; J
,$$J K
nullable$$L T
:$$T U
true$$V Z
)$$Z [
,$$[ \
CreatedDate%% 
=%%  !
table%%" '
.%%' (
Column%%( .
<%%. /
DateTimeOffset%%/ =
>%%= >
(%%> ?
type%%? C
:%%C D
$str%%E U
,%%U V
nullable%%W _
:%%_ `
false%%a f
)%%f g
,%%g h
LastModifiedBy&& "
=&&# $
table&&% *
.&&* +
Column&&+ 1
<&&1 2
string&&2 8
>&&8 9
(&&9 :
type&&: >
:&&> ?
$str&&@ O
,&&O P
nullable&&Q Y
:&&Y Z
true&&[ _
)&&_ `
,&&` a
LastModifiedDate'' $
=''% &
table''' ,
.'', -
Column''- 3
<''3 4
DateTimeOffset''4 B
>''B C
(''C D
type''D H
:''H I
$str''J Z
,''Z [
nullable''\ d
:''d e
true''f j
)''j k
}(( 
,(( 
constraints)) 
:)) 
table)) "
=>))# %
{** 
table++ 
.++ 

PrimaryKey++ $
(++$ %
$str++% 3
,++3 4
x++5 6
=>++7 9
x++: ;
.++; <

LocationID++< F
)++F G
;++G H
},, 
),, 
;,, 
migrationBuilder.. 
... 
CreateTable.. (
(..( )
name// 
:// 
$str// /
,/// 0
columns00 
:00 
table00 
=>00 !
new00" %
{11 $
AdminBookingAllocationId22 ,
=22- .
table22/ 4
.224 5
Column225 ;
<22; <
int22< ?
>22? @
(22@ A
type22A E
:22E F
$str22G L
,22L M
nullable22N V
:22V W
false22X ]
)22] ^
.33 

Annotation33 #
(33# $
$str33$ 8
,338 9
$str33: @
)33@ A
,33A B
Capacity44 
=44 
table44 $
.44$ %
Column44% +
<44+ ,
int44, /
>44/ 0
(440 1
type441 5
:445 6
$str447 <
,44< =
nullable44> F
:44F G
false44H M
)44M N
,44N O
SpaceAllocated55 "
=55# $
table55% *
.55* +
Column55+ 1
<551 2
int552 5
>555 6
(556 7
type557 ;
:55; <
$str55= B
,55B C
nullable55D L
:55L M
false55N S
)55S T
,55T U
BookingDates66  
=66! "
table66# (
.66( )
Column66) /
<66/ 0
DateTimeOffset660 >
>66> ?
(66? @
type66@ D
:66D E
$str66F V
,66V W
nullable66X `
:66` a
false66b g
)66g h
,66h i

LocationID77 
=77  
table77! &
.77& '
Column77' -
<77- .
int77. 1
>771 2
(772 3
type773 7
:777 8
$str779 >
,77> ?
nullable77@ H
:77H I
false77J O
)77O P
,77P Q
	CreatedBy88 
=88 
table88  %
.88% &
Column88& ,
<88, -
string88- 3
>883 4
(884 5
type885 9
:889 :
$str88; J
,88J K
nullable88L T
:88T U
true88V Z
)88Z [
,88[ \
CreatedDate99 
=99  !
table99" '
.99' (
Column99( .
<99. /
DateTimeOffset99/ =
>99= >
(99> ?
type99? C
:99C D
$str99E U
,99U V
nullable99W _
:99_ `
false99a f
)99f g
,99g h
LastModifiedBy:: "
=::# $
table::% *
.::* +
Column::+ 1
<::1 2
string::2 8
>::8 9
(::9 :
type::: >
:::> ?
$str::@ O
,::O P
nullable::Q Y
:::Y Z
true::[ _
)::_ `
,::` a
LastModifiedDate;; $
=;;% &
table;;' ,
.;;, -
Column;;- 3
<;;3 4
DateTimeOffset;;4 B
>;;B C
(;;C D
type;;D H
:;;H I
$str;;J Z
,;;Z [
nullable;;\ d
:;;d e
true;;f j
);;j k
}<< 
,<< 
constraints== 
:== 
table== "
=>==# %
{>> 
table?? 
.?? 

PrimaryKey?? $
(??$ %
$str??% A
,??A B
x??C D
=>??E G
x??H I
.??I J$
AdminBookingAllocationId??J b
)??b c
;??c d
table@@ 
.@@ 

ForeignKey@@ $
(@@$ %
nameAA 
:AA 
$strAA O
,AAO P
columnBB 
:BB 
xBB  !
=>BB" $
xBB% &
.BB& '

LocationIDBB' 1
,BB1 2
principalTableCC &
:CC& '
$strCC( 3
,CC3 4
principalColumnDD '
:DD' (
$strDD) 5
,DD5 6
onDeleteEE  
:EE  !
ReferentialActionEE" 3
.EE3 4
CascadeEE4 ;
)EE; <
;EE< =
}FF 
)FF 
;FF 
migrationBuilderHH 
.HH 
CreateTableHH (
(HH( )
nameII 
:II 
$strII #
,II# $
columnsJJ 
:JJ 
tableJJ 
=>JJ !
newJJ" %
{KK 
IndividualIdLL  
=LL! "
tableLL# (
.LL( )
ColumnLL) /
<LL/ 0
intLL0 3
>LL3 4
(LL4 5
typeLL5 9
:LL9 :
$strLL; @
,LL@ A
nullableLLB J
:LLJ K
falseLLL Q
)LLQ R
.MM 

AnnotationMM #
(MM# $
$strMM$ 8
,MM8 9
$strMM: @
)MM@ A
,MMA B
IndividualFirstNameNN '
=NN( )
tableNN* /
.NN/ 0
ColumnNN0 6
<NN6 7
stringNN7 =
>NN= >
(NN> ?
typeNN? C
:NNC D
$strNNE T
,NNT U
nullableNNV ^
:NN^ _
trueNN` d
)NNd e
,NNe f
IndividualLastNameOO &
=OO' (
tableOO) .
.OO. /
ColumnOO/ 5
<OO5 6
stringOO6 <
>OO< =
(OO= >
typeOO> B
:OOB C
$strOOD S
,OOS T
nullableOOU ]
:OO] ^
trueOO_ c
)OOc d
,OOd e"
IndividualEmailAddressPP *
=PP+ ,
tablePP- 2
.PP2 3
ColumnPP3 9
<PP9 :
stringPP: @
>PP@ A
(PPA B
typePPB F
:PPF G
$strPPH W
,PPW X
nullablePPY a
:PPa b
truePPc g
)PPg h
,PPh i"
IndividualMobileNumberQQ *
=QQ+ ,
tableQQ- 2
.QQ2 3
ColumnQQ3 9
<QQ9 :
stringQQ: @
>QQ@ A
(QQA B
typeQQB F
:QQF G
$strQQH W
,QQW X
nullableQQY a
:QQa b
trueQQc g
)QQg h
,QQh i#
IndividualBookingStatusRR +
=RR, -
tableRR. 3
.RR3 4
ColumnRR4 :
<RR: ;
boolRR; ?
>RR? @
(RR@ A
typeRRA E
:RRE F
$strRRG L
,RRL M
nullableRRN V
:RRV W
falseRRX ]
)RR] ^
,RR^ _$
AdminBookingAllocationIdSS ,
=SS- .
tableSS/ 4
.SS4 5
ColumnSS5 ;
<SS; <
intSS< ?
>SS? @
(SS@ A
typeSSA E
:SSE F
$strSSG L
,SSL M
nullableSSN V
:SSV W
falseSSX ]
)SS] ^
,SS^ _
IndividualLabIdTT #
=TT$ %
tableTT& +
.TT+ ,
ColumnTT, 2
<TT2 3
intTT3 6
>TT6 7
(TT7 8
typeTT8 <
:TT< =
$strTT> C
,TTC D
nullableTTE M
:TTM N
falseTTO T
)TTT U
}UU 
,UU 
constraintsVV 
:VV 
tableVV "
=>VV# %
{WW 
tableXX 
.XX 

PrimaryKeyXX $
(XX$ %
$strXX% 5
,XX5 6
xXX7 8
=>XX9 ;
xXX< =
.XX= >
IndividualIdXX> J
)XXJ K
;XXK L
tableYY 
.YY 

ForeignKeyYY $
(YY$ %
nameZZ 
:ZZ 
$strZZ _
,ZZ_ `
column[[ 
:[[ 
x[[  !
=>[[" $
x[[% &
.[[& '$
AdminBookingAllocationId[[' ?
,[[? @
principalTable\\ &
:\\& '
$str\\( A
,\\A B
principalColumn]] '
:]]' (
$str]]) C
,]]C D
onDelete^^  
:^^  !
ReferentialAction^^" 3
.^^3 4
Cascade^^4 ;
)^^; <
;^^< =
table__ 
.__ 

ForeignKey__ $
(__$ %
name`` 
:`` 
$str`` M
,``M N
columnaa 
:aa 
xaa  !
=>aa" $
xaa% &
.aa& '
IndividualLabIdaa' 6
,aa6 7
principalTablebb &
:bb& '
$strbb( 8
,bb8 9
principalColumncc '
:cc' (
$strcc) :
,cc: ;
onDeletedd  
:dd  !
ReferentialActiondd" 3
.dd3 4
Cascadedd4 ;
)dd; <
;dd< =
}ee 
)ee 
;ee 
migrationBuildergg 
.gg 

InsertDatagg '
(gg' (
tablehh 
:hh 
$strhh "
,hh" #
columnsii 
:ii 
newii 
[ii 
]ii 
{ii  
$strii! -
,ii- .
$strii/ :
,ii: ;
$strii< I
,iiI J
$striiK [
,ii[ \
$strii] o
,iio p
$striiq 
}
iiÄ Å
,
iiÅ Ç
valuesjj 
:jj 
newjj 
objectjj "
[jj" #
,jj# $
]jj$ %
{kk 
{ll 
$numll 
,ll 
nullll 
,ll 
newll "
DateTimeOffsetll# 1
(ll1 2
newll2 5
DateTimell6 >
(ll> ?
$numll? @
,ll@ A
$numllB C
,llC D
$numllE F
,llF G
$numllH I
,llI J
$numllK L
,llL M
$numllN O
,llO P
$numllQ R
,llR S
DateTimeKindllT `
.ll` a
Unspecifiedlla l
)lll m
,llm n
newllo r
TimeSpanlls {
(ll{ |
$numll| }
,ll} ~
$num	ll Ä
,
llÄ Å
$num
llÇ É
,
llÉ Ñ
$num
llÖ Ü
,
llÜ á
$num
llà â
)
llâ ä
)
llä ã
,
llã å
null
llç ë
,
llë í
null
llì ó
,
lló ò
$str
llô ©
}
ll™ ´
,
ll´ ¨
{mm 
$nummm 
,mm 
nullmm 
,mm 
newmm "
DateTimeOffsetmm# 1
(mm1 2
newmm2 5
DateTimemm6 >
(mm> ?
$nummm? @
,mm@ A
$nummmB C
,mmC D
$nummmE F
,mmF G
$nummmH I
,mmI J
$nummmK L
,mmL M
$nummmN O
,mmO P
$nummmQ R
,mmR S
DateTimeKindmmT `
.mm` a
Unspecifiedmma l
)mml m
,mmm n
newmmo r
TimeSpanmms {
(mm{ |
$nummm| }
,mm} ~
$num	mm Ä
,
mmÄ Å
$num
mmÇ É
,
mmÉ Ñ
$num
mmÖ Ü
,
mmÜ á
$num
mmà â
)
mmâ ä
)
mmä ã
,
mmã å
null
mmç ë
,
mmë í
null
mmì ó
,
mmó ò
$str
mmô ®
}
mm© ™
,
mm™ ´
{nn 
$numnn 
,nn 
nullnn 
,nn 
newnn "
DateTimeOffsetnn# 1
(nn1 2
newnn2 5
DateTimenn6 >
(nn> ?
$numnn? @
,nn@ A
$numnnB C
,nnC D
$numnnE F
,nnF G
$numnnH I
,nnI J
$numnnK L
,nnL M
$numnnN O
,nnO P
$numnnQ R
,nnR S
DateTimeKindnnT `
.nn` a
Unspecifiednna l
)nnl m
,nnm n
newnno r
TimeSpannns {
(nn{ |
$numnn| }
,nn} ~
$num	nn Ä
,
nnÄ Å
$num
nnÇ É
,
nnÉ Ñ
$num
nnÖ Ü
,
nnÜ á
$num
nnà â
)
nnâ ä
)
nnä ã
,
nnã å
null
nnç ë
,
nnë í
null
nnì ó
,
nnó ò
$str
nnô •
}
nn¶ ß
,
nnß ®
{oo 
$numoo 
,oo 
nulloo 
,oo 
newoo "
DateTimeOffsetoo# 1
(oo1 2
newoo2 5
DateTimeoo6 >
(oo> ?
$numoo? @
,oo@ A
$numooB C
,ooC D
$numooE F
,ooF G
$numooH I
,ooI J
$numooK L
,ooL M
$numooN O
,ooO P
$numooQ R
,ooR S
DateTimeKindooT `
.oo` a
Unspecifiedooa l
)ool m
,oom n
newooo r
TimeSpanoos {
(oo{ |
$numoo| }
,oo} ~
$num	oo Ä
,
ooÄ Å
$num
ooÇ É
,
ooÉ Ñ
$num
ooÖ Ü
,
ooÜ á
$num
ooà â
)
ooâ ä
)
ooä ã
,
ooã å
null
ooç ë
,
ooë í
null
ooì ó
,
ooó ò
$str
ooô ≠
}
ooÆ Ø
}pp 
)pp 
;pp 
migrationBuilderrr 
.rr 
CreateIndexrr (
(rr( )
namess 
:ss 
$strss =
,ss= >
tablett 
:tt 
$strtt 0
,tt0 1
columnuu 
:uu 
$struu $
)uu$ %
;uu% &
migrationBuilderww 
.ww 
CreateIndexww (
(ww( )
namexx 
:xx 
$strxx ?
,xx? @
tableyy 
:yy 
$stryy $
,yy$ %
columnzz 
:zz 
$strzz 2
)zz2 3
;zz3 4
migrationBuilder|| 
.|| 
CreateIndex|| (
(||( )
name}} 
:}} 
$str}} 6
,}}6 7
table~~ 
:~~ 
$str~~ $
,~~$ %
column 
: 
$str )
,) *
unique
ÄÄ 
:
ÄÄ 
true
ÄÄ 
)
ÄÄ 
;
ÄÄ 
}
ÅÅ 	
	protected
ÉÉ 
override
ÉÉ 
void
ÉÉ 
Down
ÉÉ  $
(
ÉÉ$ %
MigrationBuilder
ÉÉ% 5
migrationBuilder
ÉÉ6 F
)
ÉÉF G
{
ÑÑ 	
migrationBuilder
ÖÖ 
.
ÖÖ 
	DropTable
ÖÖ &
(
ÖÖ& '
name
ÜÜ 
:
ÜÜ 
$str
ÜÜ #
)
ÜÜ# $
;
ÜÜ$ %
migrationBuilder
àà 
.
àà 
	DropTable
àà &
(
àà& '
name
ââ 
:
ââ 
$str
ââ /
)
ââ/ 0
;
ââ0 1
migrationBuilder
ãã 
.
ãã 
	DropTable
ãã &
(
ãã& '
name
åå 
:
åå 
$str
åå &
)
åå& '
;
åå' (
migrationBuilder
éé 
.
éé 
	DropTable
éé &
(
éé& '
name
èè 
:
èè 
$str
èè !
)
èè! "
;
èè" #
}
êê 	
}
ëë 
}íí £(
åC:\Users\Ayo\Documents\ThynkSoft\COVID-19PCR.TestManagement\COVID-19PCR.TestManagement.Persistence\Migrations\20211012222938_TableChanges.cs
	namespace 	
COVID_19PCR
 
. 
TestManagement $
.$ %
Persistence% 0
.0 1

Migrations1 ;
{ 
public 

partial 
class 
TableChanges %
:& '
	Migration( 1
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
DropForeignKey		 +
(		+ ,
name

 
:

 
$str

 E
,

E F
table 
: 
$str $
)$ %
;% &
migrationBuilder 
. 
	DropIndex &
(& '
name 
: 
$str 6
,6 7
table 
: 
$str $
)$ %
;% &
migrationBuilder 
. 

DropColumn '
(' (
name 
: 
$str '
,' (
table 
: 
$str $
)$ %
;% &
migrationBuilder 
. 
	AddColumn &
<& '
int' *
>* +
(+ ,
name 
: 
$str $
,$ %
table 
: 
$str '
,' (
type 
: 
$str 
, 
nullable 
: 
false 
,  
defaultValue 
: 
$num 
)  
;  !
migrationBuilder 
. 
CreateIndex (
(( )
name 
: 
$str 6
,6 7
table 
: 
$str '
,' (
column 
: 
$str &
,& '
unique   
:   
true   
)   
;   
migrationBuilder"" 
."" 
AddForeignKey"" *
(""* +
name## 
:## 
$str## B
,##B C
table$$ 
:$$ 
$str$$ '
,$$' (
column%% 
:%% 
$str%% &
,%%& '
principalTable&& 
:&& 
$str&&  -
,&&- .
principalColumn'' 
:''  
$str''! /
,''/ 0
onDelete(( 
:(( 
ReferentialAction(( +
.((+ ,
Cascade((, 3
)((3 4
;((4 5
})) 	
	protected++ 
override++ 
void++ 
Down++  $
(++$ %
MigrationBuilder++% 5
migrationBuilder++6 F
)++F G
{,, 	
migrationBuilder-- 
.-- 
DropForeignKey-- +
(--+ ,
name.. 
:.. 
$str.. B
,..B C
table// 
:// 
$str// '
)//' (
;//( )
migrationBuilder11 
.11 
	DropIndex11 &
(11& '
name22 
:22 
$str22 6
,226 7
table33 
:33 
$str33 '
)33' (
;33( )
migrationBuilder55 
.55 

DropColumn55 '
(55' (
name66 
:66 
$str66 $
,66$ %
table77 
:77 
$str77 '
)77' (
;77( )
migrationBuilder99 
.99 
	AddColumn99 &
<99& '
int99' *
>99* +
(99+ ,
name:: 
::: 
$str:: '
,::' (
table;; 
:;; 
$str;; $
,;;$ %
type<< 
:<< 
$str<< 
,<< 
nullable== 
:== 
false== 
,==  
defaultValue>> 
:>> 
$num>> 
)>>  
;>>  !
migrationBuilder@@ 
.@@ 
CreateIndex@@ (
(@@( )
nameAA 
:AA 
$strAA 6
,AA6 7
tableBB 
:BB 
$strBB $
,BB$ %
columnCC 
:CC 
$strCC )
,CC) *
uniqueDD 
:DD 
trueDD 
)DD 
;DD 
migrationBuilderFF 
.FF 
AddForeignKeyFF *
(FF* +
nameGG 
:GG 
$strGG E
,GGE F
tableHH 
:HH 
$strHH $
,HH$ %
columnII 
:II 
$strII )
,II) *
principalTableJJ 
:JJ 
$strJJ  0
,JJ0 1
principalColumnKK 
:KK  
$strKK! 2
,KK2 3
onDeleteLL 
:LL 
ReferentialActionLL +
.LL+ ,
CascadeLL, 3
)LL3 4
;LL4 5
}MM 	
}NN 
}OO ª
ñC:\Users\Ayo\Documents\ThynkSoft\COVID-19PCR.TestManagement\COVID-19PCR.TestManagement.Persistence\Migrations\20211013170217_TestTypeandOutcomeData.cs
	namespace 	
COVID_19PCR
 
. 
TestManagement $
.$ %
Persistence% 0
.0 1

Migrations1 ;
{ 
public 

partial 
class "
TestTypeandOutcomeData /
:0 1
	Migration2 ;
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
AlterColumn		 (
<		( )
string		) /
>		/ 0
(		0 1
name

 
:

 
$str

  
,

  !
table 
: 
$str '
,' (
type 
: 
$str %
,% &
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
int# &
)& '
,' (
oldType 
: 
$str 
) 
;  
migrationBuilder 
. 
AlterColumn (
<( )
string) /
>/ 0
(0 1
name 
: 
$str #
,# $
table 
: 
$str '
,' (
type 
: 
$str %
,% &
nullable 
: 
true 
, 

oldClrType 
: 
typeof "
(" #
int# &
)& '
,' (
oldType 
: 
$str 
) 
;  
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
AlterColumn (
<( )
int) ,
>, -
(- .
name 
: 
$str  
,  !
table 
: 
$str '
,' (
type 
: 
$str 
, 
nullable   
:   
false   
,    
defaultValue!! 
:!! 
$num!! 
,!!  

oldClrType"" 
:"" 
typeof"" "
(""" #
string""# )
)"") *
,""* +
oldType## 
:## 
$str## (
,##( )
oldNullable$$ 
:$$ 
true$$ !
)$$! "
;$$" #
migrationBuilder&& 
.&& 
AlterColumn&& (
<&&( )
int&&) ,
>&&, -
(&&- .
name'' 
:'' 
$str'' #
,''# $
table(( 
:(( 
$str(( '
,((' (
type)) 
:)) 
$str)) 
,)) 
nullable** 
:** 
false** 
,**  
defaultValue++ 
:++ 
$num++ 
,++  

oldClrType,, 
:,, 
typeof,, "
(,," #
string,,# )
),,) *
,,,* +
oldType-- 
:-- 
$str-- (
,--( )
oldNullable.. 
:.. 
true.. !
)..! "
;.." #
}// 	
}00 
}11 π
ÑC:\Users\Ayo\Documents\ThynkSoft\COVID-19PCR.TestManagement\COVID-19PCR.TestManagement.Persistence\PersistenceServiceRegistration.cs
	namespace 	
COVID_19PCR
 
. 
TestManagement $
.$ %
Persistence% 0
{		 
public

 

static

 
class

 *
PersistenceServiceRegistration

 6
{ 
public 
static 
IServiceCollection ("
AddPersistenceServices) ?
(? @
this@ D
IServiceCollectionE W
servicesX `
,` a
IConfigurationb p
configurationq ~
)~ 
{ 	
services 
. 
AddDbContext !
<! "
COVID19PCRDbContext" 5
>5 6
(6 7
options7 >
=>? A
options 
. 
UseSqlServer $
($ %
configuration% 2
.2 3
GetConnectionString3 F
(F G
$strG c
)c d
)d e
)e f
;f g
services 
. 
AddDbContext !
<! "
COVID19PCRDbContext" 5
>5 6
(6 7
options7 >
=>? A
{ 
object 
p 
= 
options "
." #
UseInMemoryDatabase# 6
(6 7
$str7 X
)X Y
;Y Z
} 
) 
; 
services 
. 
	AddScoped 
( 
typeof %
(% &
IAsyncRepository& 6
<6 7
>7 8
)8 9
,9 :
typeof; A
(A B
BaseRepositoryB P
<P Q
>Q R
)R S
)S T
;T U
services 
. 
	AddScoped 
< -
!IAdminBookingAllocationRepository @
,@ A,
 AdminBookingAllocationRepositoryB b
>b c
(c d
)d e
;e f
services 
. 
	AddScoped 
< $
IIndividualLabRepository 7
,7 8#
IndividualLabRepository9 P
>P Q
(Q R
)R S
;S T
services 
. 
	AddScoped 
< !
IIndividualRepository 4
,4 5 
IndividualRepository6 J
>J K
(K L
)L M
;M N
services 
. 
	AddScoped 
< 
ILocationRepository 2
,2 3
LocationRepository4 F
>F G
(G H
)H I
;I J
return 
services 
; 
} 	
} 
} “(
ëC:\Users\Ayo\Documents\ThynkSoft\COVID-19PCR.TestManagement\COVID-19PCR.TestManagement.Persistence\Repository\AdminBookingAllocationRepository.cs
	namespace

 	
COVID_19PCR


 
.

 
TestManagement

 $
.

$ %
Persistence

% 0
.

0 1

Repository

1 ;
{ 
public 

class ,
 AdminBookingAllocationRepository 1
:2 3
BaseRepository4 B
<B C"
AdminBookingAllocationC Y
>Y Z
,[ \-
!IAdminBookingAllocationRepository] ~
{ 
public ,
 AdminBookingAllocationRepository /
(/ 0
COVID19PCRDbContext0 C
	dbContextD M
)M N
:O P
baseQ U
(U V
	dbContextV _
)_ `
{ 	
} 	
public 
Task 
< "
AdminBookingAllocation *
>* +?
3GetAdminBookingAllocationByLocationIdandBookingDate, _
(_ `
int` c

locationIDd n
,n o
DateTimeOffsetp ~
bookingDate	 ä
)
ä ã
{ 	
var "
adminBookingAllocation &
=' (

_dbContext) 3
.3 4#
AdminBookingAllocations4 K
.K L
WhereL Q
(Q R
xR S
=>T V
xW X
.X Y

LocationIDY c
==d f

locationIDg q
&&r t
x, -
.- .
BookingDates. :
.: ;
Date; ?
==@ B
bookingDateC N
.N O
DateO S
)S T
.T U
FirstOrDefaultU c
(c d
)d e
;e f
return 
Task 
. 

FromResult "
(" #"
adminBookingAllocation# 9
)9 :
;: ;
} 	
public 
async 
Task 
< 
List 
< "
AdminBookingAllocation 5
>5 6
>6 7)
GetAllRecentAvailableBookings8 U
(U V
)V W
{ 	
var 
admingBookings 
=  
await! &

_dbContext' 1
.1 2#
AdminBookingAllocations2 I
.I J
IncludeJ Q
(Q R
tR S
=>T V
tW X
.X Y
LocationY a
)a b
.b c
Wherec h
(h i
xi j
=>k m
xn o
.o p
BookingDatesp |
>} ~
DateTime	 á
.
á à
Now
à ã
.
ã å
AddDays
å ì
(
ì î
-
î ï
$num
ï ñ
)
ñ ó
&&
ò ö
x, -
.- .
Capacity. 6
>7 8
x9 :
.: ;
SpaceAllocated; I
)I J
.J K
ToListAsyncK V
(V W
)W X
;X Y
return 
admingBookings !
;! "
} 	
public!! 
async!! 
Task!! 
<!! 
List!! 
<!! "
AdminBookingAllocation!! 5
>!!5 6
>!!6 7:
.GetAdminBookingAllocationHistorybyBookingDates!!8 f
(!!f g
DateTimeOffset!!g u
	StartDate!!v 
,	!! Ä
DateTimeOffset
!!Å è
EndDate
!!ê ó
,
!!ó ò
int
!!ô ú
page
!!ù °
,
!!° ¢
int
!!£ ¶
size
!!ß ´
)
!!´ ¨
{"" 	
return## 
await## 

_dbContext## #
.### $#
AdminBookingAllocations##$ ;
.$$( )
Include$$) 0
($$0 1
l$$1 2
=>$$3 5
l$$6 7
.$$7 8
Location$$8 @
)$$@ A
.%%( )
Include%%) 0
(%%0 1
i%%1 2
=>%%3 5
i%%6 7
.%%7 8
Individuals%%8 C
)%%C D
.%%D E
ThenInclude%%E P
(%%P Q
x%%Q R
=>%%S U
x%%V W
.%%W X
IndividualLab%%X e
)%%e f
.&&( )
Where&&) .
(&&. /
s&&/ 0
=>&&1 3
(&&4 5
s&&5 6
.&&6 7
BookingDates&&7 C
>=&&D F
	StartDate&&G P
&&&&Q S
s&&T U
.&&U V
BookingDates&&V b
<=&&c e
EndDate&&f m
)&&m n
)&&n o
.''( )
Skip'') -
(''- .
(''. /
page''/ 3
-''4 5
$num''6 7
)''7 8
*''9 :
size''; ?
)''? @
.''@ A
Take''A E
(''E F
size''F J
)''J K
.''K L
AsNoTracking''L X
(''X Y
)''Y Z
.''Z [
OrderBy''[ b
(''b c
x''c d
=>''e g
x''h i
.''i j
BookingDates''j v
)''v w
.''w x
ToListAsync	''x É
(
''É Ñ
)
''Ñ Ö
;
''Ö Ü
}(( 	
})) 
}** «(
C:\Users\Ayo\Documents\ThynkSoft\COVID-19PCR.TestManagement\COVID-19PCR.TestManagement.Persistence\Repository\BaseRepository.cs
	namespace		 	
COVID_19PCR		
 
.		 
TestManagement		 $
.		$ %
Persistence		% 0
.		0 1

Repository		1 ;
{

 
public 

class 
BaseRepository 
<  
T  !
>! "
:# $
IAsyncRepository% 5
<5 6
T6 7
>7 8
where9 >
T? @
:A B
classC H
{ 
	protected 
readonly 
COVID19PCRDbContext .

_dbContext/ 9
;9 :
public 
BaseRepository 
( 
COVID19PCRDbContext 1
	dbContext2 ;
); <
{ 	

_dbContext 
= 
	dbContext "
;" #
} 	
public 
virtual 
async 
Task !
<! "
T" #
># $
GetByIdAsync% 1
(1 2
Guid2 6
id7 9
)9 :
{ 	
return 
await 

_dbContext #
.# $
Set$ '
<' (
T( )
>) *
(* +
)+ ,
., -
	FindAsync- 6
(6 7
id7 9
)9 :
;: ;
} 	
public 
virtual 
async 
Task !
<! "
T" #
># $
GetByIdAsync% 1
(1 2
int2 5
id6 8
)8 9
{ 	
return 
await 

_dbContext #
.# $
Set$ '
<' (
T( )
>) *
(* +
)+ ,
., -
	FindAsync- 6
(6 7
id7 9
)9 :
;: ;
} 	
public 
async 
Task 
< 
IReadOnlyList '
<' (
T( )
>) *
>* +
ListAllAsync, 8
(8 9
)9 :
{ 	
return   
await   

_dbContext   #
.  # $
Set  $ '
<  ' (
T  ( )
>  ) *
(  * +
)  + ,
.  , -
ToListAsync  - 8
(  8 9
)  9 :
;  : ;
}!! 	
public## 
async## 
virtual## 
Task## !
<##! "
IReadOnlyList##" /
<##/ 0
T##0 1
>##1 2
>##2 3 
GetPagedReponseAsync##4 H
(##H I
int##I L
page##M Q
,##Q R
int##S V
size##W [
)##[ \
{$$ 	
return%% 
await%% 

_dbContext%% #
.%%# $
Set%%$ '
<%%' (
T%%( )
>%%) *
(%%* +
)%%+ ,
.%%, -
Skip%%- 1
(%%1 2
(%%2 3
page%%3 7
-%%8 9
$num%%: ;
)%%; <
*%%= >
size%%? C
)%%C D
.%%D E
Take%%E I
(%%I J
size%%J N
)%%N O
.%%O P
AsNoTracking%%P \
(%%\ ]
)%%] ^
.%%^ _
ToListAsync%%_ j
(%%j k
)%%k l
;%%l m
}&& 	
public(( 
async(( 
Task(( 
<(( 
T(( 
>(( 
AddAsync(( %
(((% &
T((& '
entity((( .
)((. /
{)) 	
await** 

_dbContext** 
.** 
Set**  
<**  !
T**! "
>**" #
(**# $
)**$ %
.**% &
AddAsync**& .
(**. /
entity**/ 5
)**5 6
;**6 7
await++ 

_dbContext++ 
.++ 
SaveChangesAsync++ -
(++- .
)++. /
;++/ 0
return-- 
entity-- 
;-- 
}.. 	
public00 
async00 
Task00 
UpdateAsync00 %
(00% &
T00& '
entity00( .
)00. /
{11 	

_dbContext22 
.22 
Entry22 
(22 
entity22 #
)22# $
.22$ %
State22% *
=22+ ,
EntityState22- 8
.228 9
Modified229 A
;22A B
await33 

_dbContext33 
.33 
SaveChangesAsync33 -
(33- .
)33. /
;33/ 0
}44 	
public66 
async66 
Task66 
DeleteAsync66 %
(66% &
T66& '
entity66( .
)66. /
{77 	

_dbContext88 
.88 
Set88 
<88 
T88 
>88 
(88 
)88 
.88  
Remove88  &
(88& '
entity88' -
)88- .
;88. /
await99 

_dbContext99 
.99 
SaveChangesAsync99 -
(99- .
)99. /
;99/ 0
}:: 	
}<< 
}== ”
àC:\Users\Ayo\Documents\ThynkSoft\COVID-19PCR.TestManagement\COVID-19PCR.TestManagement.Persistence\Repository\IndividualLabRepository.cs
	namespace		 	
COVID_19PCR		
 
.		 
TestManagement		 $
.		$ %
Persistence		% 0
.		0 1

Repository		1 ;
{

 
public 

class #
IndividualLabRepository (
:) *
BaseRepository+ 9
<9 :
IndividualLab: G
>G H
,H I$
IIndividualLabRepositoryJ b
{ 
public #
IndividualLabRepository &
(& '
COVID19PCRDbContext' :
	dbContext; D
)D E
:F G
baseH L
(L M
	dbContextM V
)V W
{ 	
} 	
} 
} ª
ÖC:\Users\Ayo\Documents\ThynkSoft\COVID-19PCR.TestManagement\COVID-19PCR.TestManagement.Persistence\Repository\IndividualRepository.cs
	namespace

 	
COVID_19PCR


 
.

 
TestManagement

 $
.

$ %
Persistence

% 0
.

0 1

Repository

1 ;
{ 
public 

class  
IndividualRepository %
:& '
BaseRepository( 6
<6 7

Individual7 A
>A B
,B C!
IIndividualRepositoryD Y
{ 
public  
IndividualRepository #
(# $
COVID19PCRDbContext$ 7
	dbContext8 A
)A B
:C D
baseE I
(I J
	dbContextJ S
)S T
{ 	
} 	
public 
Task 
< 
bool 
> 
DoesIndividualExist -
(- .
string. 4
emailAddress5 A
,A B
stringC I
mobileNumberJ V
)V W
{ 	
var 
matches 
= 

_dbContext $
.$ %
Individuals% 0
.0 1
Any1 4
(4 5
e5 6
=>7 9
e: ;
.; <"
IndividualEmailAddress< R
==S U
emailAddressV b
&& 
e 
. "
IndividualMobileNumber '
==( *
mobileNumber+ 7
&&8 :
e; <
.< =#
IndividualBookingStatus= T
==U W
trueX \
)\ ]
;] ^
return 
Task 
. 

FromResult "
(" #
matches# *
)* +
;+ ,
} 	
public 
Task 
< 

Individual 
> 2
&GetIndividualBookingByEmailAndMobileNo  F
(F G
stringG M
emailAddressN Z
,Z [
string\ b
mobileNumberc o
)o p
{ 	
var 
individualBooking !
=" #

_dbContext$ .
.. /
Individuals/ :
.: ;
Include; B
(B C
tC D
=>E G
tH I
.I J
IndividualLabJ W
)W X
.X Y
WhereY ^
(^ _
x_ `
=>a c
xd e
.e f"
IndividualEmailAddressf |
==} 
emailAddress
Ä å
&&
ç è
x, -
.- ."
IndividualMobileNumber. D
==E G
mobileNumberH T
)T U
.U V
FirstOrDefaultV d
(d e
)e f
;f g
return 
Task 
. 

FromResult "
(" #
individualBooking# 4
)4 5
;5 6
} 	
}   
}!! ‡
ÉC:\Users\Ayo\Documents\ThynkSoft\COVID-19PCR.TestManagement\COVID-19PCR.TestManagement.Persistence\Repository\LocationRepository.cs
	namespace		 	
COVID_19PCR		
 
.		 
TestManagement		 $
.		$ %
Persistence		% 0
.		0 1

Repository		1 ;
{

 
public 

class 
LocationRepository #
:$ %
BaseRepository& 4
<4 5
Location5 =
>= >
,> ?
ILocationRepository@ S
{ 
public 
LocationRepository !
(! "
COVID19PCRDbContext" 5
	dbContext6 ?
)? @
:A B
baseC G
(G H
	dbContextH Q
)Q R
{ 	
} 	
public 
Task 
< 
bool 
> 
DoesLocationExist +
(+ ,
int, /

locationId0 :
): ;
{ 	
var 
matches 
= 

_dbContext $
.$ %
	Locations% .
.. /
Any/ 2
(2 3
e3 4
=>5 7
e8 9
.9 :

LocationID: D
==E G

locationIdH R
)R S
;S T
return 
Task 
. 

FromResult "
(" #
matches# *
)* +
;+ ,
} 	
} 
} 